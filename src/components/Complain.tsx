// components/Complain.tsx
"use client";

import { useState } from "react";
import { Send, User, Phone, Mail, MapPin, MessageCircle, AlertCircle, ThumbsUp, ChevronDown, ChevronUp } from "lucide-react";

interface UserData {
  name: string;
  phone: string;
  email: string;
  address: string;
  complain: string;
  comment: string;
}

export default function Complain() {
  const [userData, setUserData] = useState<UserData>({
    name: "",
    phone: "",
    email: "",
    address: "",
    complain: "",
    comment: ""
  });

  const [showIdentityForm, setShowIdentityForm] = useState(false);
  const [activeForm, setActiveForm] = useState<"complain" | "comment">("complain");

  const handleInputChange = (field: keyof UserData, value: string) => {
    setUserData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handleComplainSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!showIdentityForm) {
      setShowIdentityForm(true);
      setActiveForm("complain");
      return;
    }

    // ‡¶´‡¶∞‡ßç‡¶Æ validation
    if (!userData.name || !userData.phone || !userData.address || !userData.complain) {
      alert("‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®");
      return;
    }

    console.log("‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:", userData);
    alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
    
    // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
    setUserData({
      name: "",
      phone: "",
      email: "",
      address: "",
      complain: "",
      comment: ""
    });
    setShowIdentityForm(false);
  };

  const handleCommentSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!showIdentityForm) {
      setShowIdentityForm(true);
      setActiveForm("comment");
      return;
    }

    // ‡¶´‡¶∞‡ßç‡¶Æ validation
    if (!userData.name || !userData.phone || !userData.address || !userData.comment) {
      alert("‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®");
      return;
    }

    console.log("‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:", userData);
    alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
    
    // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
    setUserData({
      name: "",
      phone: "",
      email: "",
      address: "",
      complain: "",
      comment: ""
    });
    setShowIdentityForm(false);
  };

  const toggleIdentityForm = () => {
    setShowIdentityForm(!showIdentityForm);
  };

  return (
    <div className="bg-live-gradienttow px-4 sm:px-8 md:px-12 py-8 bg-white rounded-xl shadow-2xl overflow-hidden">
      {/* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */}
      <div className=".bg-live-gradienttow rounded from-purple-600 to-blue-600 py-6 text-center">
        <h1 className="text-2xl font-bold text-white">‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ì ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h1>
        <p className="text-purple-100 mt-2">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶¨‡¶æ‡¶® ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞‡¶ï‡ßá ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßá</p>
      </div>

      {/* ‡¶Æ‡ßÇ‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü - ‡¶¶‡ßÅ‡¶á‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶æ‡¶® ‡¶°‡¶ø‡¶≠ */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
        {/* ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶°‡¶ø‡¶≠ */}
        <div className="bg-gradient-to-br from-red-50 to-orange-50 rounded-xl p-6 shadow-lg border border-red-100">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-3 bg-red-100 rounded-full">
              <AlertCircle className="text-red-600" size={24} />
            </div>
            <h2 className="text-xl font-bold text-red-800">‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
          </div>

          <form onSubmit={handleComplainSubmit} className="space-y-4">
            <div className="relative">
              <label className="block text-sm font-medium text-red-700 mb-2">
                <MessageCircle size={16} className="inline mr-1" />
                ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ *
              </label>
              <textarea
                required
                value={userData.complain}
                onChange={(e) => handleInputChange("complain", e.target.value)}
                rows={5}
                className="w-full px-4 py-3 border border-red-200 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all bg-white"
                placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
              />
            </div>

            <button
              type="submit"
              className="w-full bg-gradient-to-r from-red-600 to-orange-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-red-700 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2"
            >
              <Send size={20} />
              {showIdentityForm && activeForm === "complain" ? "‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®" : "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™"}
            </button>
          </form>

          <div className="mt-4 p-3 bg-red-100 rounded-lg">
            <p className="text-xs text-red-700">
              ‚ö° ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®: <strong>‡ßß‡ß¨‡ß´‡ß™‡ß´</strong>
            </p>
          </div>
        </div>

        {/* ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶°‡¶ø‡¶≠ */}
        <div className="bg-gradient-to-br from-green-50 to-teal-50 rounded-xl p-6 shadow-lg border border-green-100">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-3 bg-green-100 rounded-full">
              <ThumbsUp className="text-green-600" size={24} />
            </div>
            <h2 className="text-xl font-bold text-green-800">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
          </div>

          <form onSubmit={handleCommentSubmit} className="space-y-4">
            <div className="relative">
              <label className="block text-sm font-medium text-green-700 mb-2">
                <MessageCircle size={16} className="inline mr-1" />
                ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø *
              </label>
              <textarea
                required
                value={userData.comment}
                onChange={(e) => handleInputChange("comment", e.target.value)}
                rows={5}
                className="w-full px-4 py-3 border border-green-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all bg-white"
                placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶¨‡¶æ‡¶® ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
              />
            </div>

            <button
              type="submit"
              className="w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-green-700 hover:to-teal-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2"
            >
              <Send size={20} />
              {showIdentityForm && activeForm === "comment" ? "‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®" : "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™"}
            </button>
          </form>

          <div className="mt-4 p-3 bg-green-100 rounded-lg">
            <p className="text-xs text-green-700">
              üí° ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡ßá‡¶¨‡¶æ ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßá
            </p>
          </div>
        </div>
      </div>

      {/* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶ï‡¶∂‡¶® - ‡¶°‡¶æ‡¶á‡¶®‡¶æ‡¶Æ‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá show/hide ‡¶π‡¶¨‡ßá */}
      {showIdentityForm && (
        <div className="bg-gray-50 p-6 mt-4 rounded-xl border-t">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-gray-800">
              ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø *
            </h3>
            <button
              onClick={toggleIdentityForm}
              className="p-2 text-gray-500 hover:text-gray-700 transition-colors"
            >
              {showIdentityForm ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
            </button>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div className="relative">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <User size={16} className="inline mr-1" />
                ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ *
              </label>
              <input
                type="text"
                required
                value={userData.name}
                onChange={(e) => handleInputChange("name", e.target.value)}
                className="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
              />
              <User size={18} className="absolute left-3 top-11 text-gray-400" />
            </div>

            <div className="relative">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <Phone size={16} className="inline mr-1" />
                ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *
              </label>
              <input
                type="tel"
                required
                value={userData.phone}
                onChange={(e) => handleInputChange("phone", e.target.value)}
                className="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                placeholder="01XXXXXXXXX"
              />
              <Phone size={18} className="absolute left-3 top-11 text-gray-400" />
            </div>

            <div className="relative">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <Mail size={16} className="inline mr-1" />
                ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ
              </label>
              <input
                type="email"
                value={userData.email}
                onChange={(e) => handleInputChange("email", e.target.value)}
                className="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                placeholder="email@example.com"
              />
              <Mail size={18} className="absolute left-3 top-11 text-gray-400" />
            </div>

            <div className="relative">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <MapPin size={16} className="inline mr-1" />
                ‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ *
              </label>
              <input
                type="text"
                required
                value={userData.address}
                onChange={(e) => handleInputChange("address", e.target.value)}
                className="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ/‡¶∞‡ßã‡¶°, ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç"
              />
              <MapPin size={18} className="absolute left-3 top-11 text-gray-400" />
            </div>
          </div>

          {/* ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® */}
          <div className="mt-6 flex justify-center">
            <button
              type="button"
              onClick={activeForm === "complain" ? handleComplainSubmit : handleCommentSubmit}
              className="bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-8 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2"
            >
              <Send size={20} />
              {activeForm === "complain" ? "‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®" : "‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®"}
            </button>
          </div>

          <div className="mt-4 p-3 bg-purple-100 rounded-lg">
            <p className="text-xs text-purple-700 text-center">
              üîí ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ó‡ßã‡¶™‡¶® ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßå‡¶∞‡¶∏‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶∂‡ßç‡¶≤‡¶ø‡¶∑‡ßç‡¶ü ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ï‡¶∞‡ßç‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
            </p>
          </div>
        </div>
      )}
    </div>
  );
}